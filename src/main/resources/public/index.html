<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <title>Medilog homepage</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
</head>

<body>
    <form class="createUser" action="index.html" method="post"><br>
        <h2>Uue kasutaja loomine</h2>
        <label>Eesnimi</label>
        <input id="firstName" type="text" name=""/><br>
        <label>Perekonnanimi</label>
        <input id="lastName" type="text" name=""><br>
        <label>Isikukood</label>
        <input id="idCode" type="number" name=""><br>
        <label>Kasutajanimi</label>
        <input id="username" type="text" name=""/><br>
        <label>Salas√µna</label>
        <input id="password" type="password" name=""><br>
        <button id="saveUserButton" type="button" name="">Salvesta andmed</button><br>
    </form>
 </body>

<script>
    let firstName = document.getElementById("firstName");
    let lastName = document.getElementById("lastName");
    let idCode = document.getElementById("idCode");
    let username = document.getElementById("username");
    let password = document.getElementById("password");
    let saveUserButton = document.getElementById("saveUserButton");
    // http://localhost:8081/medilog/createuser?firstname=Mari&lastname=Maasikas&idcode=11111111111&username=mammu&password=Mammu555
    function addNewUser() {
        fetch('/medilog/createuser?firstname=' + firstName.value + '&lastname=' + lastName.value
            + '&idcode=' + idCode.value + '&username=' + username.value + '&password=' + password.value,
            {
                method: 'POST'
            })
            .then(result => result.text())
            .then(function (result) {
                alert("Uus kasutaja on loodud")
            })
    }
    saveUserButton.onclick = addNewUser;
</script>
</html>
