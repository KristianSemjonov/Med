<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <title>Medilog</title>
</head>

<body>

    <form class="createUser" action="index.html" method="post"><br>
        <h2>Uue kasutaja loomine</h2>
        <label>Eesnimi</label>
        <input id="firstName" type="text" name=""/><br>
        <label>Perekonnanimi</label>
        <input id="lastName" type="text" name=""><br>
        <label>Isikukood</label>
        <input id="idCode" type="number" name=""><br>
        <label>Kasutajanimi</label>
        <input id="username" type="text" name=""/><br>
        <label>Salasõna</label>
        <input id="password" type="password" name=""><br>
        <button id="saveUserButton" type="button" name="">Salvesta andmed</button>
    </form>

    <form class="bloodPressure" action="index.html" method="post">
        <h2>Vererõhu mõõtmistulemused</h2><br>
        <label>Kasutaja ID</label>
        <input id="idBloodPressure" type="date" name="" value=""><br>
        <label>Kuupäev</label>
        <input id="bloodpressureDate" type="date" name="" value=""><br>
        <label>Kellaaeg</label>
        <input id="bloodpressureTime" type="time" name="" value=""><br>
        <label>Süstoolne vererõhk (mm/Hg)*</label>
        <input id="systolic" type="number" name="" value=""><br>
        <label>Diastoolne vererõhk (mm/Hg)*</label>
        <input id="diastolic" type="number" name="" value=""><br>
        <label>Pulss (lööki/min)</label>
        <input id="pulse" type="number" name="" value=""><br>
        <label>Lisainfo</label>
        <input id="addInfoBloodPressure" type="text" name="" value=""><br>
        <button id="saveBloodPressureButton" type="button" name="">Salvesta andmed</button>
    </form>

    <form class="bloodSugar" action="index.html" method="post">
        <h2>Veresuhkuru mõõtmistulemused</h2><br>
        <label>Kasutaja ID</label>
        <input id="idBloodSugar" type="date" name="" value=""><br>
        <label>Kuupäev</label>
        <input id="bloodsugarDate" type="date" name="" value=""><br>
        <label>Kellaaeg*</label>
        <input id="bloodsugarTime" type="time" name="" value=""><br>
        <label>Veresuhkur (mmol/l)</label>
        <input id="bloodSugar" type="number" name="" value=""><br>
        <label>Lisainfo</label>
        <input id="addInfoBloodSugar" type="text" name="" value=""><br>
        <button id="saveBloodSugarButton" type="button" name="">Salvesta andmed</button>
    </form>


    <form class="weight" action="index.html" method="post">
        <h2>Kehakaal ja KMI</h2><br>
        <label>Kasutaja ID</label>
        <input id="idWeight" type="date" name="" value=""><br>
        <label>Kuupäev</label>
        <input type="date" name="" value=""><br>
        <label>Kellaaeg</label>
        <input type="time" name="" value=""><br>
        <label>Kehakaal (kg)</label>
        <input type="number" name="" value=""><br>
        <label>Pikkus (cm)</label>
        <input type="number" name="" value=""><br>
        <label>KMI (kg/m2)</label>
        <input type="number" name="" value=""><br>
        <label>Lisainfo</label>
        <input id="addInfoWeight" type="text" name="" value=""><br>
        <button id="saveWeightButton" type="button" name="">Salvesta andmed</button>
    </form>


    <form class="" action="index.html" method="post">
        <h2>Kehatemperatuur</h2><br>
        <label>Kasutaja ID</label>
        <input id="idTemp" type="date" name="" value=""><br>
        <label>Kuupäev</label>
        <input id="tempDate"  type="date" name="" value=""><br>
        <label>Kellaaeg</label>
        <input id="tempTime" type="time" name="" value=""><br>
        <label>Kehatemperatuur (°C)</label>
        <input id="temp" type="number" name="" value=""><br>
        <label>Lisainfo</label>
        <input id="addInfoTemp" type="text" name="" value=""><br>
        <button id="saveTempButton" type="button" name="">Salvesta andmed</button>
    </form>
</body>

<script>
    let firstName = document.getElementById("firstName");
    let lastName = document.getElementById("lastName");
    let idCode = document.getElementById("idCode");
    let username = document.getElementById("username");
    let password = document.getElementById("password");
    let saveUserButton = document.getElementById("saveUserButton")

    // http://localhost:8081/medilog/createuser?firstname=Mari&lastname=Maasikas&idcode=11111111111&username=mammu&password=Mammu555
    function newUser() {
        fetch('/medilog/createuser?firstname=' + firstName.value + '&lastname=' + lastName.value
            + '&idcode=' + idCode.value + '&username=' + username.value + '&password=' + password.value,
            {
                method: 'POST'
            })
            .then(result => result.text())
            .then(function (result) {
                alert("Uus kasutaja on loodud")
            })
    }
    saveUserButton.onclick = newUser;


    let idBloodPressure = document.getElementById("idBloodPressure");
    let bloodpressureDate = document.getElementById("bloodpressureDate");
    let bloodpressureTime = document.getElementById("bloodpressureTime");
    let systolic = document.getElementById("systolic");
    let diastolic = document.getElementById("diastolic");
    let pulse = document.getElementById("pulse");
    let addInfoBloodPressure = document.getElementById("addInfoBloodPressure");
    let saveBloodPressureButton = document.getElementById("saveBloodPressureButton")

    // http://localhost:8081/medilog/bloodpressure?userid=1&date=2021-02-04&time=16:20&systolic=141&diastolic=80&pulse=72&addinfo=test
    function addBloodPressure() {
        fetch('/medilog/bloodpressure?userid=' + idBloodPressure.value + '&date=' + bloodpressureDate.value + '&time=' + bloodpressureTime.value + '&systolic=' + systolic.value
            + '&diastolic=' + diastolic.value + '&pulse=' + pulse.value + '&addinfo=' + addInfoBloodPressure.value,
            {
                method: 'POST'
            })
            .then(result => result.text())
            .then(function (result) {
                alert("Andmed on sisestatud")
            })
    }
    saveBloodPressureButton.onclick = addBloodPressure;



</script>
</html>

