<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <title>View weight diary</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
</head>

<body>
    <div class="diaryWeight">
        <h2>Vaata kehakaalu ja KMI</h2><br>
        <label>Kasutaja ID</label>
        <input id="idWeight" type="number" name="" value="">
        <button id="diaryWeightButton" type="button" name="">Vaata p채evikut</button>
        <br>
        <table border = "1">
                <tbody id="diaryWeightTable">
            <tr>
                <th>Kuup채ev</th>
                <th>Kellaaeg</th>
                <th>Kehakaal (kg)</th>
                <th>Pikkus (m)</th>
                <th>KMI (kg/m2)</th>
                <th>Lisainfo</th>
            </tr>
            </tbody>
        </table>
    </div>
</body>

<script>
    // http://localhost:8081/diaryweight.html
    function diaryWeight() {
        fetch('/http://localhost:8081/medilog/diaryweight?userid=' + idWeight.value)
            .then(result => result.json())
            .then(function (result) {
                let tableElement = document.getElementById("weightDiaryTable");
                tableElement.innerHTML = "<tr>\n" +
                    "                <th>Kuup채ev</th>\n" +
                    "                <th>Kellaaeg</th>\n" +
                    "                <th>Kehakaal (kg)</th>\n" +
                    "                <th>Pikkus (m)</th>\n" +
                    "                <th>KMI (kg/m2)</th>\n" +
                    "                <th>Lisainfo</th>\n" +
                    "            </tr>";
                for (let element of result) {
                    let newRowElement = document.createElement("tr");
                    tableElement.appendChild(newRowElement);
                    // Kuup채ev
                    let newCellElement = document.createElement("td");
                    newCellElement.innerText = element.date;
                    newRowElement.appendChild(newCellElement)
                    // Kellaaeg
                    newCellElement = document.createElement("td");
                    newCellElement.innerText = element.time;
                    newRowElement.appendChild(newCellElement)
                    // Kaal
                    newCellElement = document.createElement("td");
                    newCellElement.innerText = element.weight;
                    newRowElement.appendChild(newCellElement)
                    // Pikkus
                    newCellElement = document.createElement("td");
                    newCellElement.innerText = element.height;
                    newRowElement.appendChild(newCellElement)
                    // KMI
                    newCellElement = document.createElement("td");
                    newCellElement.innerText = element.bmi;
                    newRowElement.appendChild(newCellElement)
                    // Lisainfo
                    newCellElement = document.createElement("td");
                    newCellElement.innerText = element.addInfo;
                    newRowElement.appendChild(newCellElement)
                }
                console.log(result);
            })
    }
    let diaryWeightButton = document.getElementById("diaryWeightButton");
    diaryWeightButton.onclick = diaryWeight;
</script>
</html>

