<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <title>Add Blood Sugar</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
</head>

<body>
    <form class="addBloodSugar" action="index.html" method="post">
        <h2>Veresuhkru mõõtmistulemused</h2><br>
        <label>Kasutaja ID</label>
        <input id="idBloodSugar" type="number" name="" value=""><br>
        <label>Kuupäev</label>
        <input id="bloodSugarDate" type="date" name="" value=""><br>
        <label>Kellaaeg</label>
        <input id="bloodSugarTime" type="time" name="" value=""><br>
        <label>Veresuhkur (mmol/l)</label>
        <input id="bloodSugar" type="number" name="" value=""><br>
        <label>Lisainfo</label>
        <input id="addInfoBloodSugar" type="text" name="" value=""><br>
        <button id="saveBloodSugarButton" type="button" name="">Salvesta andmed</button>
    </form>
</body>

<script>
    let idBloodSugar = document.getElementById("idBloodSugar");
    let bloodSugarDate = document.getElementById("bloodSugarDate");
    let bloodSugarTime = document.getElementById("bloodSugarTime");
    let bloodSugar = document.getElementById("bloodSugar");
    let addInfoBloodSugar = document.getElementById("addInfoBloodSugar");
    let saveBloodSugarButton = document.getElementById("saveBloodSugarButton");
    // http://localhost:8081/medilog/bloodsugar?userid=1&date=2021-02-04&time=16:20&bloodsugar=5.6&addinfo=test
    function addBloodSugar() {
        fetch('/medilog/bloodsugar?userid=' + idBloodSugar.value + '&date=' + bloodSugarDate.value + '&time=' + bloodSugarTime.value + '&bloodsugar=' + bloodSugar.value + '&addinfo=' + addInfoBloodSugar.value,
            {
                method: 'POST'
            })
            .then(result => result.text())
            .then(function (result) {
                alert("Andmed on sisestatud")
            })
    }
    saveBloodSugarButton.onclick = addBloodSugar;
</script>
</html>