<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <title>Add Blood Pressure</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
</head>

<body>
    <form class="addBloodPressure" action="index.html" method="post">
        <h2>Vererõhu mõõtmistulemused</h2><br>
        <label>Kasutaja ID</label>
        <input id="idBloodPressure" type="number" name="" value=""><br>
        <label>Kuupäev</label>
        <input id="bloodPressureDate" type="date" name="" value=""><br>
        <label>Kellaaeg</label>
        <input id="bloodPressureTime" type="time" name="" value=""><br>
        <label>Süstoolne vererõhk (mm/Hg)</label>
        <input id="systolic" type="number" name="" value=""><br>
        <label>Diastoolne vererõhk (mm/Hg)</label>
        <input id="diastolic" type="number" name="" value=""><br>
        <label>Pulss (lööki/min)</label>
        <input id="pulse" type="number" name="" value=""><br>
        <label>Lisainfo</label>
        <input id="addInfoBloodPressure" type="text" name="" value=""><br>
        <button id="saveBloodPressureButton" type="button" name="">Salvesta andmed</button>
    </form>
</body>

<script>
    let idBloodPressure = document.getElementById("idBloodPressure");
    let bloodPressureDate = document.getElementById("bloodPressureDate");
    let bloodPressureTime = document.getElementById("bloodPressureTime");
    let systolic = document.getElementById("systolic");
    let diastolic = document.getElementById("diastolic");
    let pulse = document.getElementById("pulse");
    let addInfoBloodPressure = document.getElementById("addInfoBloodPressure");
    let saveBloodPressureButton = document.getElementById("saveBloodPressureButton");
    // http://localhost:8081/medilog/bloodpressure?userid=1&date=2021-02-04&time=16:20&systolic=141&diastolic=80&pulse=72&addinfo=test
    function addBloodPressure() {
        fetch('/medilog/bloodpressure?userid=' + idBloodPressure.value + '&date=' + bloodPressureDate.value + '&time=' + bloodPressureTime.value +
            '&systolic=' + systolic.value + '&diastolic=' + diastolic.value + '&pulse=' + pulse.value + '&addinfo=' + addInfoBloodPressure.value,
            {
                method: 'POST'
            })
            .then(result => result.text())
            .then(function (result) {
                alert("Andmed on sisestatud")
            })
    }
        saveBloodPressureButton.onclick = addBloodPressure;

</script>

</html>